"use strict";(self.webpackChunkreact_way_of_samurai=self.webpackChunkreact_way_of_samurai||[]).push([[34],{4951:function(s,e,t){t.d(e,{Gr:function(){return f},II:function(){return m},gx:function(){return d}});var r=t(8489),o=t(3738),i=(t(2791),t(8015)),n=t(6139),a=t(184),l=["input","meta"],c=["input","meta"],u=function(s){var e=s.meta,t=e.touched,r=e.error,o=s.children,n=t&&r;return(0,a.jsxs)("div",{className:i.Z.formControl+" "+(n?i.Z.error:""),children:[(0,a.jsx)("div",{children:o}),n&&(0,a.jsx)("span",{children:r})]})},d=function(s){var e=s.input,t=(s.meta,(0,o.Z)(s,l));return(0,a.jsx)(u,(0,r.Z)((0,r.Z)({},s),{},{children:(0,a.jsx)("textarea",(0,r.Z)((0,r.Z)({},e),t))}))},m=function(s){var e=s.input,t=(s.meta,(0,o.Z)(s,c));return(0,a.jsx)(u,(0,r.Z)((0,r.Z)({},s),{},{children:(0,a.jsx)("input",(0,r.Z)((0,r.Z)({},e),t))}))};function f(s,e,t,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return(0,a.jsxs)("div",{children:[(0,a.jsx)(n.Z,(0,r.Z)({placeholder:s,name:e,validate:t,component:o},i))," ",l]})}},9034:function(s,e,t){t.r(e),t.d(e,{default:function(){return q}});var r=t(8489),o=t(7853),i=t(243),n=t(1020),a=t(8334),l=t(2791),c=t(3430),u={descriptionBlock:"ProfileInfo_descriptionBlock__QRxfo",status:"ProfileInfo_status__9TBlh",profile:"ProfileInfo_profile__IYIpe",description:"ProfileInfo_description__OTf4m",button:"ProfileInfo_button__GDwWw"},d=t(6295),m=t(184),f=function(s){var e=(0,l.useState)(!1),t=(0,c.Z)(e,2),r=t[0],o=t[1],i=(0,l.useState)(s.status),n=(0,c.Z)(i,2),a=n[0],u=n[1];(0,l.useEffect)((function(){u(s.status)}),[s.status]);return(0,m.jsxs)("div",{children:[!r&&(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Status: "})," ",(0,m.jsx)("span",{onDoubleClick:function(){o(!0)},children:s.status||"-------"})]}),r&&(0,m.jsx)("div",{children:(0,m.jsx)("input",{onChange:function(s){u(s.currentTarget.value)},autoFocus:!0,onBlur:function(){o(!1),s.updateStatus(a)},value:a})})]})},h=t(3200),p=t(4951),x=t(704),_=t(8015),j=(0,x.Z)({form:"edit-profile"})((function(s){var e=s.handleSubmit,t=s.profile,r=s.error;return(0,m.jsxs)("form",{onSubmit:e,children:[(0,m.jsx)("div",{children:(0,m.jsx)("button",{children:"save"})}),r&&(0,m.jsx)("div",{className:_.Z.formSummaryError,children:r}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Full name"}),": ",(0,p.Gr)("Full name","fullName",[],p.II)]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Looking for a job"}),": ",(0,p.Gr)("","lookingForAJob",[],p.II,{type:"checkbox"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"My professional skills"}),":",(0,p.Gr)("My professional skills","lookingForAJobDescription",[],p.gx)]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"About me"}),":",(0,p.Gr)("About me","aboutMe",[],p.gx)]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((function(s){return(0,m.jsx)("div",{className:u.contact,children:(0,m.jsxs)("b",{children:[s,": ",(0,p.Gr)(s,"contacts."+s,[],p.II)]})},s)}))]})]})})),v="ProfileData_item__sxa-+",b="ProfileData_fullName__qkXki",g="ProfileData_button__o0E+w",P="ProfileData_contacts__6+-Cf",k=function(s){var e=s.profile,t=s.isOwner,r=s.goToEditMode;return(0,m.jsxs)("div",{className:v,children:[(0,m.jsx)("div",{className:b,children:e.fullName}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Looking for a job"}),": ",e.lookingForAJob?"yes":"no"]}),e.lookingForAJob&&(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"My professional skills"}),": ",e.lookingForAJobDescription]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"About me"}),": ",e.aboutMe]}),(0,m.jsxs)("div",{className:P,children:[(0,m.jsx)("b",{children:"Contacts"}),":",(0,m.jsxs)("li",{children:[(0,m.jsx)("span",{children:"facebook:"})," ",e.contacts.facebook]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("span",{children:"github:"})," ",e.contacts.github]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("span",{children:"instagram:"})," ",e.contacts.instagram]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("span",{children:"twitter:"})," ",e.contacts.twitter]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("span",{children:"vk:"})," ",e.contacts.vk]}),(0,m.jsxs)("li",{children:[(0,m.jsx)("span",{children:"youtube:"})," ",e.contacts.youtube]})]}),(0,m.jsxs)("div",{children:[" ",t&&(0,m.jsx)("button",{className:g,onClick:r,children:"edit"})]})]})},N=function(s){var e=s.profile,t=s.status,r=s.updateStatus,o=s.isOwner,i=s.savePhoto,n=s.saveProfile,a=(0,l.useState)(!1),p=(0,c.Z)(a,2),x=p[0],_=p[1];if(!e)return(0,m.jsx)(d.Z,{});return(0,m.jsxs)("div",{className:u.descriptionBlock,children:[(0,m.jsxs)("div",{className:u.profile,children:[(0,m.jsx)("img",{src:e.photos.large||h}),o&&(0,m.jsx)("input",{type:"file",onChange:function(s){s.target.files&&s.target.files.length&&i(s.target.files[0])}}),(0,m.jsx)("div",{className:u.status,children:(0,m.jsx)(f,{status:t,updateStatus:r})})]}),(0,m.jsx)("div",{className:u.description,children:x?(0,m.jsx)(j,{initialValues:e,profile:e,onSubmit:function(s){n(s).then((function(){_(!1)}))}}):(0,m.jsx)(k,{goToEditMode:function(){_(!0)},profile:e,isOwner:o})})]})},C="Profile_profile__xIzAt",I=t(2177),Z=t(4483),y=t(3174),S={item:"Post_item__2ZpCO",itemImg:"Post_itemImg__5FsBq",itemText:"Post_itemText__6L7jO",itemName:"Post_itemName__tbJIw",itemLike:"Post_itemLike__ZFEYY"},F=function(s){var e,t,r,o=null!==(e=s.profile)&&void 0!==e&&null!==(t=e.photos)&&void 0!==t&&t.small?s.profile.photos.small:h;return(0,m.jsxs)("div",{className:S.item,children:[(0,m.jsx)("div",{className:S.itemImg,children:o&&(0,m.jsx)("img",{src:o,alt:""})}),(0,m.jsxs)("div",{className:S.itemText,children:[(0,m.jsx)("div",{className:S.itemName,children:(null===(r=s.profile)||void 0===r?void 0:r.fullName)||"Samurai"}),(0,m.jsx)("div",{className:S.itemMessage,children:s.message})]}),(0,m.jsxs)("div",{className:S.itemLike,children:[(0,m.jsx)(Z.G,{icon:y.m6i})," ",s.likesCount]})]})},w="MyPosts_posts__QQK2l",D="MyPosts_addPost__z-aI+",B="MyPosts_postsBlock__MGRfS",E=t(5705),M=t(310),A=M.Ry({post:M.Z_().typeError("Invalid login").required("Required")}),T=function(s){return(0,m.jsx)(E.J9,{initialValues:{post:""},onSubmit:function(e,t){var r=t.resetForm;s.onSubmit(e.post),r({})},validationSchema:A,validateOnBlur:!0,children:function(s){var e=s.errors,t=s.touched,r=s.handleChange,o=s.handleBlur,i=s.isValid,n=s.dirty;return(0,m.jsx)(E.l0,{children:(0,m.jsxs)("div",{className:_.Z.addPost,children:[(0,m.jsxs)("div",{className:_.Z.addPost__title,children:["Write a new post... ",t.post&&e.post&&(0,m.jsx)("span",{children:e.post})]}),(0,m.jsxs)("div",{className:"textarea",children:[(0,m.jsx)(E.gN,{className:"textarea",component:"textarea",name:"post",onBlur:o,onChange:r}),(0,m.jsx)("button",{disabled:!i&&!n,type:"submit",children:"Post"})]})]})})}})},O=t(1065),U=(0,I.$j)((function(s){return{posts:s.profilePage.posts,profile:s.profilePage.profile}}),{addPost:O.Nw.addPostActionCreator})((function(s){var e=s.posts.reverse().map((function(e,t){return(0,m.jsx)(F,{profile:s.profile,message:e.message,likesCount:e.likesCount},t)}));return(0,m.jsxs)("div",{className:B,children:[(0,m.jsxs)("div",{className:D,children:[" ",(0,m.jsx)(T,{onSubmit:s.addPost})]}),(0,m.jsx)("div",{className:w,children:e})]})})),G=function(s){return(0,m.jsxs)("div",{className:C,children:[(0,m.jsx)(N,{savePhoto:s.savePhoto,isOwner:s.isOwner,profile:s.profile,status:s.status,saveProfile:s.saveProfile,updateStatus:s.updateStatus}),(0,m.jsx)(U,{profile:void 0,posts:[]})]})},J=t(3679),L=t(2789),R=function(s){(0,n.Z)(t,s);var e=(0,a.Z)(t);function t(s){return(0,o.Z)(this,t),e.call(this,s)}return(0,i.Z)(t,[{key:"refreshProfile",value:function(){var s=+this.props.match.params.userId;s||(s=this.props.authorizedUserId)||this.props.history.push("/login"),s?(this.props.getUserProfile(s),this.props.getStatus(s)):console.error("ID should exists in URI params or in state ('authorizedUserId')")}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,e){this.props.match.params.userId!=s.match.params.userId&&this.refreshProfile()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return(0,m.jsx)(G,(0,r.Z)((0,r.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),t}(l.Component),q=(0,L.qC)((0,I.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth}}),{getUserProfile:O.et,getStatus:O.lR,updateStatus:O.Nf,savePhoto:O.Ju,saveProfile:O.Ii}),J.Z)(R)},8015:function(s,e){e.Z={formControl:"FormsControls_formControl__Qqnnn",error:"FormsControls_error__KUCU0",formSummaryError:"FormsControls_formSummaryError__IyknP",login:"FormsControls_login__Si2wy",form:"FormsControls_form__QjY6U",formTitle:"FormsControls_formTitle__DGzSR",formDescription:"FormsControls_formDescription__Et9mJ",formWrapper:"FormsControls_formWrapper__1o9Dk",formLabelText:"FormsControls_formLabelText__xR1HN",input:"FormsControls_input__ij5By",formButton:"FormsControls_formButton__e-Pnu",formError:"FormsControls_formError__ulgZE"}}}]);
//# sourceMappingURL=34.6caa2469.chunk.js.map