"use strict";(self.webpackChunkreact_way_of_samurai=self.webpackChunkreact_way_of_samurai||[]).push([[988],{988:function(s,e,t){t.r(e),t.d(e,{default:function(){return z}});var i=t(8489),r=t(7853),o=t(243),n=t(1020),a=t(8334),l=t(2791),c=t(3430),u={descriptionBlock:"ProfileInfo_descriptionBlock__bPSs9",status:"ProfileInfo_status__p6B1M",profile:"ProfileInfo_profile__wKUeB",description:"ProfileInfo_description__-wYAe",button:"ProfileInfo_button__3qexu"},d=t(462),h=t(184),p=function(s){var e=(0,l.useState)(!1),t=(0,c.Z)(e,2),i=t[0],r=t[1],o=(0,l.useState)(s.status),n=(0,c.Z)(o,2),a=n[0],u=n[1];(0,l.useEffect)((function(){u(s.status)}),[s.status]);return(0,h.jsxs)("div",{children:[!i&&(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Status: "})," ",(0,h.jsx)("span",{onDoubleClick:function(){r(!0)},children:s.status||"-------"})]}),i&&(0,h.jsx)("div",{children:(0,h.jsx)("input",{onChange:function(s){u(s.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),s.updateStatus(a)},value:a})})]})},f=t(3200),m=t(5222),x=t(704),j=t(8015),v=(0,x.Z)({form:"edit-profile"})((function(s){var e=s.handleSubmit,t=s.profile,i=s.error;return(0,h.jsxs)("form",{onSubmit:e,children:[(0,h.jsx)("div",{children:(0,h.jsx)("button",{children:"save"})}),i&&(0,h.jsx)("div",{className:j.Z.formSummaryError,children:i}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Full name"}),": ",(0,m.Gr)("Full name","fullName",[],m.II)]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Looking for a job"}),": ",(0,m.Gr)("","lookingForAJob",[],m.II,{type:"checkbox"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"My professional skills"}),":",(0,m.Gr)("My professional skills","lookingForAJobDescription",[],m.gx)]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"About me"}),":",(0,m.Gr)("About me","aboutMe",[],m.gx)]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((function(s){return(0,h.jsx)("div",{className:u.contact,children:(0,h.jsxs)("b",{children:[s,": ",(0,m.Gr)(s,"contacts."+s,[],m.II)]})},s)}))]})]})})),_="ProfileData_item__0WtCH",b="ProfileData_fullName__4obzs",P="ProfileData_button__1RQll",g="ProfileData_contacts__NHP+G",k=function(s){var e=s.profile,t=s.isOwner,i=s.goToEditMode;return(0,h.jsxs)("div",{className:_,children:[(0,h.jsx)("div",{className:b,children:e.fullName}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"Looking for a job"}),": ",e.lookingForAJob?"yes":"no"]}),e.lookingForAJob&&(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"My professional skills"}),": ",e.lookingForAJobDescription]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("b",{children:"About me"}),": ",e.aboutMe]}),(0,h.jsxs)("div",{className:g,children:[(0,h.jsx)("b",{children:"Contacts"}),":",(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:"facebook:"})," ",e.contacts.facebook]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:"github:"})," ",e.contacts.github]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:"instagram:"})," ",e.contacts.instagram]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:"twitter:"})," ",e.contacts.twitter]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:"vk:"})," ",e.contacts.vk]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("span",{children:"youtube:"})," ",e.contacts.youtube]})]}),(0,h.jsxs)("div",{children:[" ",t&&(0,h.jsx)("button",{className:P,onClick:i,children:"edit"})]})]})},N=function(s){var e=s.profile,t=s.status,i=s.updateStatus,r=s.isOwner,o=s.savePhoto,n=s.saveProfile,a=(0,l.useState)(!1),m=(0,c.Z)(a,2),x=m[0],j=m[1];if(!e)return(0,h.jsx)(d.Z,{});return(0,h.jsxs)("div",{className:u.descriptionBlock,children:[(0,h.jsxs)("div",{className:u.profile,children:[(0,h.jsx)("img",{src:e.photos.large||f}),r&&(0,h.jsx)("input",{type:"file",onChange:function(s){s.target.files&&s.target.files.length&&o(s.target.files[0])}}),(0,h.jsx)("div",{className:u.status,children:(0,h.jsx)(p,{status:t,updateStatus:i})})]}),(0,h.jsx)("div",{className:u.description,children:x?(0,h.jsx)(v,{initialValues:e,profile:e,onSubmit:function(s){n(s).then((function(){j(!1)}))}}):(0,h.jsx)(k,{goToEditMode:function(){j(!0)},profile:e,isOwner:r})})]})},y=t(2177),I=t(5531),S={item:"Post_item__vzpjA",itemImg:"Post_itemImg__MXy-U",itemText:"Post_itemText__tGHRB",itemName:"Post_itemName__AK5GU",itemLike:"Post_itemLike__dt8Ch"};var C=function(s){var e,t,i,r=null!==(e=s.profile)&&void 0!==e&&null!==(t=e.photos)&&void 0!==t&&t.small?s.profile.photos.small:f;return(0,h.jsxs)("div",{className:S.item,children:[(0,h.jsx)("div",{className:S.itemImg,children:r&&(0,h.jsx)("img",{src:r,alt:""})}),(0,h.jsxs)("div",{className:S.itemText,children:[(0,h.jsx)("div",{className:S.itemName,children:(null===(i=s.profile)||void 0===i?void 0:i.fullName)||"Samurai"}),(0,h.jsx)("div",{className:S.itemMessage,children:s.message})]}),(0,h.jsx)("div",{className:S.itemLike,children:(0,h.jsxs)("span",{children:[" \u2665 ",s.likesCount]})})]})},w="MyPosts_posts__tFdWj",M="MyPosts_addPost__8YEwK",Z="MyPosts_addPost__title__jmedP",A="MyPosts_postsBlock__7xiVi",B=t(5705),U=t(310),D=U.Ry({post:U.Z_().typeError("Invalid login").required("Required")}),F=function(s){return(0,h.jsx)(B.J9,{initialValues:{post:""},onSubmit:function(e,t){var i=t.resetForm;s.onSubmit(e.post),i({})},validationSchema:D,validateOnBlur:!0,children:function(s){var e=s.errors,t=s.touched,i=s.handleChange,r=s.handleBlur,o=s.isValid,n=s.dirty;return(0,h.jsx)(B.l0,{children:(0,h.jsxs)("div",{className:M,children:[(0,h.jsxs)("div",{className:Z,children:["Write a new post... ",t.post&&e.post&&(0,h.jsx)("span",{children:e.post})]}),(0,h.jsxs)("div",{className:"textarea",children:[(0,h.jsx)(B.gN,{className:"textarea",component:"textarea",name:"post",onBlur:r,onChange:i}),(0,h.jsx)("button",{disabled:!o&&!n,type:"submit",children:"Post"})]})]})})}})},G=t(1065),O=(0,y.$j)((function(s){return{posts:s.profilePage.posts,profile:s.profilePage.profile}}),{addPost:G.Nw.addPostActionCreator})((function(s){var e=(0,I.Z)(s.posts).reverse().map((function(s){return(0,h.jsx)(C,{message:s.message,likesCount:s.likesCount},s.id)}));return(0,h.jsxs)("div",{className:A,children:[(0,h.jsx)(F,{onSubmit:s.addPost}),(0,h.jsx)("div",{className:w,children:e})]})})),J=function(s){return(0,h.jsxs)("div",{children:[(0,h.jsx)(N,{savePhoto:s.savePhoto,isOwner:s.isOwner,profile:s.profile,status:s.status,saveProfile:s.saveProfile,updateStatus:s.updateStatus}),(0,h.jsx)(O,{})]})},E=t(3679),R=t(2789),T=function(s){(0,n.Z)(t,s);var e=(0,a.Z)(t);function t(s){return(0,r.Z)(this,t),e.call(this,s)}return(0,o.Z)(t,[{key:"refreshProfile",value:function(){var s=+this.props.match.params.userId;s||(s=this.props.authorizedUserId)||this.props.history.push("/login"),s?(this.props.getUserProfile(s),this.props.getStatus(s)):console.error("ID should exists in URI params or in state ('authorizedUserId')")}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,e){this.props.match.params.userId!=s.match.params.userId&&this.refreshProfile()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return(0,h.jsx)(J,(0,i.Z)((0,i.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),t}(l.Component),z=(0,R.qC)((0,y.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth}}),{getUserProfile:G.et,getStatus:G.lR,updateStatus:G.Nf,savePhoto:G.Ju,saveProfile:G.Ii}),E.Z)(T)}}]);
//# sourceMappingURL=988.97243ac3.chunk.js.map